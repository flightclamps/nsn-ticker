<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NSN COSMIC TICKER - NOTSOCJ EDITION</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">

<style>
/* =========== CORE STRUCTURE =========== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  overflow: hidden;
  font-family: 'Rajdhani', sans-serif;
  background: #000;
  color: #fff;
  height: 100vh;
  width: 100vw;
  user-select: none; 
}

/* =========== COSMIC BACKGROUND =========== */
.cosmos {
  position: fixed; top: 0; left: 0;
  width: 100%; height: 100%;
  background: linear-gradient(to bottom, #000000 0%, #0a0a2e 50%, #000000 100%);
  overflow: hidden; z-index: 1;
}

/* Star Animation */
.star-field { position: absolute; width: 100%; height: 100%; }
.stars-small {
  background-image: radial-gradient(1px 1px at 25px 5px, white, transparent),
                    radial-gradient(1px 1px at 50px 25px, white, transparent),
                    radial-gradient(1px 1px at 125px 20px, white, transparent);
  background-size: 100px 100px;
  animation: drift 100s linear infinite;
}

@keyframes drift { from { transform: translateY(0); } to { transform: translateY(-1000px); } }

/* =========== SPORTS TICKER CONTAINER =========== */
.sports-ticker {
  position: fixed; top: 20px; left: 0; /* Adjusted top for better OBS framing */
  width: 100%; height: 70px;
  display: flex; z-index: 100;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(0, 5, 15, 0.9);
  backdrop-filter: blur(10px);
}

/* 1. LEFT: LOGO */
.ticker-logo {
  width: 100px; min-width: 100px; height: 100%;
  background: linear-gradient(135deg, #000428 0%, #004e92 100%);
  border-right: 3px solid #00d2ff;
  display: flex; flex-direction: column;
  justify-content: center; align-items: center;
  z-index: 20;
  box-shadow: 5px 0 15px rgba(0,0,0,0.5);
}

.ticker-title {
  font-family: 'Orbitron', sans-serif; font-size: 20px; font-weight: 900;
  color: #fff; text-shadow: 0 0 10px #00d2ff;
  line-height: 1; text-align: center;
}

.ticker-tagline {
  font-size: 9px; color: #FFD700; font-weight: 700;
  letter-spacing: 1px; margin-top: 2px;
}

/* 2. MIDDLE: SCROLLING CONTENT */
.ticker-content {
  flex: 1; height: 100%; position: relative;
  overflow: hidden;
}

/* Dual Line Setup */
.ticker-lines {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  display: flex; flex-direction: column;
}

.ticker-line {
  height: 50%; width: 100%;
  display: flex; align-items: center;
  overflow: hidden; position: relative;
}

.ticker-line.scores {
  background: rgba(0, 20, 60, 0.3);
  border-bottom: 1px solid rgba(255,255,255,0.05);
}

.ticker-line.news {
  background: rgba(0, 0, 0, 0.5);
}

/* Scrolling Animation */
.line-items {
  position: absolute; display: flex; align-items: center;
  white-space: nowrap; left: 0;
  will-change: transform;
  animation: scroll-line linear infinite;
}

.line-items-scores { animation-duration: 65s; }
.line-items-news { animation-duration: 60s; }

@keyframes scroll-line {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); } /* Moves duplicate set */
}

.line-item {
  display: flex; align-items: center;
  margin-right: 50px; font-size: 18px; color: #e0e0e0;
  text-shadow: 1px 1px 1px #000;
  font-weight: 600;
}

/* Badges */
.league-label {
  color: white; font-weight: 800; font-family: 'Orbitron', sans-serif;
  padding: 2px 8px; margin-right: 8px; font-size: 10px;
  border-radius: 3px; min-width: 40px; text-align: center;
  box-shadow: 0 0 8px rgba(0,0,0,0.6);
}

.nba { background: #C9082A; }
.nfl { background: #013369; }
.mlb { background: #002D72; }
.nhl { background: #111; border: 1px solid #555; }
.ufc { background: #D20A0A; }
.soc { background: #248f24; }
.news { background: #6a0dad; }
.promo { background: #FFD700; color: #000; text-shadow: none; }

.score-split { margin: 0 6px; color: #888; }
.score-val { color: #fff; font-weight: 700; font-size: 1.1em; }
.live-indicator { color: #ff0000; font-size: 10px; font-weight: 900; animation: blink 1s infinite; margin-left: 5px;}

/* ENGAGEMENT TEXT STYLES */
.engage-text { color: #FFD700; text-shadow: 0 0 8px rgba(255, 215, 0, 0.6); font-weight: 800; text-transform: uppercase; }
.star-icon { color: #FFD700; font-size: 1.2em; vertical-align: middle; }

/* 3. RIGHT: ACTION BOX (Clock/Follow) */
.ticker-action {
  width: 120px; min-width: 120px; height: 100%;
  background: #000;
  border-left: 3px solid #00d2ff;
  display: flex; flex-direction: column;
  justify-content: center; align-items: center;
  z-index: 20;
  position: relative;
  overflow: hidden;
}

.action-content {
  position: absolute; width: 100%; height: 100%;
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  transition: transform 0.5s cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* Flip Animation Classes */
.show-clock .clock-view { transform: translateY(0); }
.show-clock .follow-view { transform: translateY(100%); }
.show-follow .clock-view { transform: translateY(-100%); }
.show-follow .follow-view { transform: translateY(0); }

.clock-view, .follow-view {
  position: absolute; width: 100%; height: 100%;
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  background: #050510;
}

.follow-view { background: #00d2ff; color: #000; }

#clock-time { font-family: 'Orbitron', sans-serif; font-size: 22px; font-weight: 700; color: #fff; }
.follow-text { font-family: 'Orbitron', sans-serif; font-size: 14px; font-weight: 900; text-align: center; line-height: 1.2; }

.separator { width: 5px; height: 5px; background: #555; border-radius: 50%; margin: 0 20px; }

@keyframes blink { 50% { opacity: 0.5; } }

</style>
</head>
<body>

<div class="cosmos">
  <div class="star-field stars-small"></div>
</div>

<div class="sports-ticker">
  <div class="ticker-logo">
    <div class="ticker-title">NSN</div>
    <div class="ticker-tagline">SPORTS</div>
  </div>
  
  <div class="ticker-content">
    <div class="ticker-lines">
      <div class="ticker-line scores">
        <div class="line-items line-items-scores" id="scores-feed">
          <div class="line-item">LOADING COSMIC DATA...</div>
        </div>
      </div>
      <div class="ticker-line news">
        <div class="line-items line-items-news" id="news-feed">
          <div class="line-item">INITIALIZING STREAM...</div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="ticker-action show-clock" id="action-box">
    <div class="clock-view">
      <div id="clock-time">--:--</div>
    </div>
    <div class="follow-view">
      <div class="follow-text">FOLLOW<br>NotSoCj‚≠êÔ∏è</div>
    </div>
  </div>
</div>

<script>
/* =========== CONFIGURATION =========== */
const CONFIG = {
  proxy: "https://corsproxy.io/?",
  refreshRate: 60000, // 1 Minute Refresh
  timeout: 5000
};

/* =========== ACTION BOX LOGIC (Clock/Follow Flip) =========== */
function startActionBox() {
  const box = document.getElementById('action-box');
  const timeEl = document.getElementById('clock-time');
  
  // Update Time
  setInterval(() => {
    const now = new Date();
    timeEl.textContent = now.toLocaleTimeString("en-US", { hour: "numeric", minute: "2-digit" });
  }, 1000);

  // Flip Animation every 10 seconds
  setInterval(() => {
    if(box.classList.contains('show-clock')) {
      box.classList.remove('show-clock');
      box.classList.add('show-follow');
    } else {
      box.classList.remove('show-follow');
      box.classList.add('show-clock');
    }
  }, 10000); // 10 seconds swap
}
startActionBox();

/* =========== API HELPERS =========== */
async function fetchJSON(url) {
  const controller = new AbortController();
  const id = setTimeout(() => controller.abort(), CONFIG.timeout);
  try {
    const res = await fetch(CONFIG.proxy + encodeURIComponent(url), { signal: controller.signal });
    clearTimeout(id);
    return res.ok ? await res.json() : null;
  } catch (e) { return null; }
}

/* =========== DATA FETCHING =========== */

// 1. GET SCORES (Expanded for UFC & Soccer)
async function getScores() {
  const sources = [
    { tag: "NBA", cls: "nba", url: "https://site.api.espn.com/apis/site/v2/sports/basketball/nba/scoreboard" },
    { tag: "NFL", cls: "nfl", url: "https://site.api.espn.com/apis/site/v2/sports/football/nfl/scoreboard" },
    { tag: "UFC", cls: "ufc", url: "https://site.api.espn.com/apis/site/v2/sports/mma/ufc/scoreboard" },
    { tag: "SOC", cls: "soc", url: "https://site.api.espn.com/apis/site/v2/sports/soccer/eng.1/scoreboard" } // Premier League
  ];

  let items = [];

  for (const s of sources) {
    const data = await fetchJSON(s.url);
    if (!data || !data.events) continue;

    // Take top 3 games per sport to keep loop tight
    for (const ev of data.events.slice(0, 3)) {
      try {
        const c = ev.competitions[0];
        const h = c.competitors.find(x => x.homeAway === 'home');
        const a = c.competitors.find(x => x.homeAway === 'away');
        const status = ev.status.type.state; // 'in', 'post', 'pre'
        
        let scoreStr = "";
        let badge = "";

        if(status === 'in') {
          scoreStr = `<span class="score-val">${a.score}</span> - <span class="score-val">${h.score}</span> <span class="live-indicator">LIVE</span>`;
        } else if (status === 'post') {
          scoreStr = `<span class="score-val">${a.score}</span> - <span class="score-val">${h.score}</span> F`;
        } else {
          scoreStr = `vs`;
        }

        // Format: Team vs Team Score
        const match = `<span class="league-label ${s.cls}">${s.tag}</span> ${a.team.abbreviation} ${scoreStr} ${h.team.abbreviation}`;
        items.push(`<div class="line-item">${match}</div><span class="separator"></span>`);
        
      } catch(e) { continue; }
    }
  }
  
  if (items.length === 0) return `<div class="line-item">NO LIVE GAMES SCHEDULED</div>`;
  return items.join('');
}

// 2. GET NEWS & MIX ENGAGEMENT
async function getNews() {
  // Hardcoded Engagement Messages
  const promoMsgs = [
    `<span class="engage-text">‚≠êÔ∏è FOLLOW NotSoCj‚≠êÔ∏è NOW!</span>`,
    `<span class="engage-text">üî• TAP THE SCREEN TO SUPPORT!</span>`,
    `<span class="engage-text">üéÅ SEND A GIFT = SHOUTOUT!</span>`,
    `<span class="engage-text">üì¢ SHARE THE STREAM!</span>`
  ];

  // Fetch ESPN News Headlines
  let newsItems = [];
  try {
    const data = await fetchJSON("https://site.api.espn.com/apis/site/v2/sports/basketball/nba/news");
    if(data && data.articles) {
      data.articles.slice(0, 4).forEach(art => {
        newsItems.push(art.headline);
      });
    }
  } catch(e) {}

  // Mix News and Promos
  let finalHTML = "";
  let promoIndex = 0;

  if(newsItems.length === 0) newsItems = ["Sports Update Loading...", "Welcome to the Stream"];

  newsItems.forEach((news) => {
    // Add News Item
    finalHTML += `<div class="line-item"><span class="league-label news">NEWS</span> ${news}</div><span class="separator"></span>`;
    
    // Add Promo Item immediately after
    if(promoIndex < promoMsgs.length) {
      finalHTML += `<div class="line-item"><span class="league-label promo">NSN</span> ${promoMsgs[promoIndex]}</div><span class="separator"></span>`;
      promoIndex++;
      if(promoIndex >= promoMsgs.length) promoIndex = 0; // Loop promos
    }
  });

  return finalHTML;
}

/* =========== RUN ENGINE =========== */
async function runTicker() {
  const [scoresHTML, newsHTML] = await Promise.all([getScores(), getNews()]);

  // Fill Containers (Duplicate x4 for smooth infinite scroll without gaps)
  document.getElementById('scores-feed').innerHTML = scoresHTML.repeat(4);
  document.getElementById('news-feed').innerHTML = newsHTML.repeat(4);
}

// Init
runTicker();
setInterval(runTicker, CONFIG.refreshRate); // Refresh data every 60s

</script>
</body>
</html>
