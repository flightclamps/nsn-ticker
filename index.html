<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<title>NSN Ticker</title>
<style>
body {
  margin: 0;
  background: #081f3d;
  font-family: Arial, sans-serif;
  overflow: hidden;
}

#ticker {
  white-space: nowrap;
  position: absolute;
  top: 0;
  left: 100%;
  font-size: 24px;
  font-weight: bold;
  color: white;
  display: flex;
  align-items: center;
  animation: scroll 250s linear infinite;
}

.section {
  margin-right: 80px;
}

.label {
  background: #0a3f7c;
  padding: 4px 10px;
  border-radius: 4px;
  margin-right: 15px;
}
@keyframes scroll {
  from { left: 100%; }
  to { left: -300%; }
}
</style>
</head>

<body>

<div id="ticker">
  <span class="section label">WELCOME TO THE STREAM — POWERED BY NSN MEMBERS</span>
  <span id="scores" class="section">Loading scores...</span>
  <span id="news" class="section">Loading news...</span>
  <span class="section">ENGAGE: Who’s winning tonight? Drop your predictions!</span>
</div>

<script>
async function fetchProxy(url) {
  const proxy = "https://api.allorigins.win/raw?url=";
  const res = await fetch(proxy + encodeURIComponent(url));
  return res.json();
}

async function loadScores() {
  try {
    let nfl = await fetchProxy("https://site.api.espn.com/apis/v2/sports/football/nfl/scoreboard");
    let nba = await fetchProxy("https://site.api.espn.com/apis/v2/sports/basketball/nba/scoreboard");
    let nhl = await fetchProxy("https://site.api.espn.com/apis/v2/sports/hockey/nhl/scoreboard");

    function parse(league, data) {
      return data.events.map(g => {
        let c1 = g.competitions[0].competitors[0];
        let c2 = g.competitions[0].competitors[1];
        return `${league}: ${c1.team.abbreviation} ${c1.score} - ${c2.team.abbreviation} ${c2.score}`;
      }).join("   |   ");
    }

    let full =
      parse("NFL", nfl) + "   ||   " +
      parse("NBA", nba) + "   ||   " +
      parse("NHL", nhl);

    document.getElementById("scores").innerText = full;
  } catch {
    document.getElementById("scores").innerText = "Scores unavailable";
  }
}

async function loadNews() {
  try {
    let news = await fetchProxy("https://site.api.espn.com/apis/v2/sports/news");
    let items = news.articles.slice(0, 5).map(a => a.headline).join("   |   ");
    document.getElementById("news").innerText = "NEWS: " + items;
  } catch {
    document.getElementById("news").innerText = "News unavailable";
  }
}

async function refreshAll() {
  await loadScores();
  await loadNews();
}
refreshAll();
setInterval(refreshAll, 60000);
</script>

</body>
</html>
