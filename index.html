<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NSN SPORTS • Live Ticker</title>

<style>
  body {
    margin: 0;
    background: #000;
    overflow: hidden;
    font-family: Arial, sans-serif;
  }

  /* Ticker Container */
  .nsn-bar {
    width: 100vw;
    height: 68px;
    background: #0a0a0a;
    border-top: 3px solid #1E88E5;
    border-bottom: 3px solid #1E88E5;
    display: flex;
    align-items: center;
  }

  /* Left Logo */
  .nsn-logo {
    width: 280px;
    height: 100%;
    background: linear-gradient(135deg, #1E88E5, #0d4d80);
    border-right: 3px solid white;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding-left: 12px;
  }
  .nsn-title {
    font-size: 22px;
    font-weight: 900;
    color: #fff;
  }
  .nsn-sub {
    font-size: 11px;
    color: #d6ecff;
  }
  .nsn-sponsor {
    font-size: 10px;
    color: #f7f7f7;
    opacity: 0.8;
    margin-top: 3px;
  }

  /* Scroll Track */
  .scroll-area {
    flex: 1;
    overflow: hidden;
    position: relative;
  }

  .scroll-track {
    position: absolute;
    white-space: nowrap;
    font-size: 22px;
    font-weight: 600;
    color: #fff;
    padding-left: 100%;
    animation: scroll linear infinite;
  }

  .item {
    margin-right: 70px;
  }

  .label {
    color: #FFC107;
    font-weight: 900;
    margin-right: 10px;
  }

  /* Uniform scroll speed */
  @keyframes scroll {
    from { transform: translateX(0); }
    to   { transform: translateX(-100%); }
  }
</style>
</head>

<body>

<div class="nsn-bar">
  <div class="nsn-logo">
    <div class="nsn-title">NSN SPORTS</div>
    <div class="nsn-sub">NotSoNetwork • No Commercials</div>
    <div class="nsn-sponsor">Sponsored by: HYPE FUEL ENERGY</div>
  </div>

  <div class="scroll-area">
    <div class="scroll-track" id="track"></div>
  </div>
</div>

<script>
  // ------------------------------
  // SETTINGS / PROXY
  // ------------------------------
  const proxy = "https://api.allorigins.win/raw?url="; // proxy that worked before
  const track = document.getElementById("track");
  const SPEED = 38; // pixels per second
  const REFRESH_MS = 120000; // 2 min rebuild

  // ------------------------------
  // FEEDS: NEWS (ESPN / YAHOO / CBS)
  // ------------------------------
  const FEEDS = [
    proxy + encodeURIComponent("https://www.espn.com/espn/rss/news"),
    proxy + encodeURIComponent("https://sports.yahoo.com/rss/"),
    proxy + encodeURIComponent("https://www.cbssports.com/rss/headlines/")
  ];

  // ------------------------------
  // ENGAGEMENT LINES
  // ------------------------------
  const engagement = [
    "WELCOME TO NSN SPORTS • DROP YOUR FAVORITE TEAM IN CHAT",
    "LIKE THE STREAM • FOLLOW • SHARE WITH A FRIEND",
    "SONG REQUESTS: !play Song - Artist",
    "JOIN THE CLUB FOR 1 COIN!!!!!",
    "NSN SPECIAL • NO COMMERCIALS • LIVE SPORTS TALK"
  ];

  // ------------------------------
  // TEAM SECTIONS
  // ------------------------------
  const teamSections = [
    "COWBOYS • DROP YOUR SEASON RECORD PREDICTION IN CHAT",
    "LAKERS • IS THIS ROSTER TITLE-READY OR ONE PIECE AWAY?",
    "CHIEFS • ARE WE SEEING A TRUE DYNASTY OR ARE TEAMS CATCHING UP?",
    "EAGLES • WHAT IS THE BIGGEST NEED RIGHT NOW?",
    "49ERS • WHO IS THE REAL MVP OF THIS TEAM?",
    "RANGERS (NHL) • WHO IS YOUR CLUTCH PLAYER IN GAME 7?",
    "MAPLE LEAFS • WHAT HAS TO CHANGE TO GO ON A DEEP RUN?",
    "MAVS • HOW FAR CAN LUKA TAKE THIS CORE?",
    "CFB • WHO IS YOUR REAL #1 TEAM RIGHT NOW?",
    "PREMIER LEAGUE • WHO FINISHES TOP FOUR THIS SEASON?"
  ];

  // ------------------------------
  // FAN QUESTIONS (ROTATING)
  // ------------------------------
  const fanQuestions = [
    "COWBOYS FANS: IS THIS THE YEAR OR ARE YOU STILL WAITING?",
    "EAGLES FANS: WHAT WORRIES YOU MOST ABOUT THIS TEAM?",
    "CHIEFS FANS: HOW DO YOU FEEL ABOUT THE RECEIVER ROOM?",
    "BILLS FANS: WHAT IS THE MISSING PIECE FOR A TITLE RUN?",
    "49ERS FANS: WHO IS THE REAL MVP OF THIS ROSTER?",
    "RAVENS FANS: IS THIS THE BEST VERSION OF LAMAR?",
    "STEELERS FANS: HOW MANY WINS DOES TOMLIN GET THIS SEASON?",
    "DOLPHINS FANS: DO YOU TRUST THIS OFFENSE IN THE PLAYOFFS?",
    "PACKERS FANS: ARE YOU ALL-IN ON JORDAN LOVE?",
    "BEARS FANS: DO YOU BELIEVE IN THE CURRENT QB?",
    "LAKERS FANS: MORE SHOOTING OR MORE DEFENSE?",
    "CELTICS FANS: WHO IS YOUR X-FACTOR?",
    "WARRIORS FANS: HOW MANY PRIME YEARS DOES CURRY HAVE LEFT?",
    "KNICKS FANS: WHAT MOVE DO YOU WANT NEXT?",
    "HEAT FANS: WHO FITS HEAT CULTURE THE MOST RIGHT NOW?",
    "MAVS FANS: WHAT IS YOUR REALISTIC PLAYOFF EXPECTATION?",
    "SPURS FANS: WHAT IS WEMBY’S REALISTIC CEILING?",
    "SOCCER FANS: WHO IS THE BEST CLUB IN THE WORLD RIGHT NOW?",
    "PREMIER LEAGUE FANS: WHO FINISHES TOP FOUR?",
    "CFB FANS: WHO IS YOUR TRUE NO. 1 TEAM?",
    "TEXAS FANS: IS TEXAS BACK FOR REAL THIS TIME?",
    "MICHIGAN FANS: WHAT IS THE MINIMUM EXPECTATION NEXT SEASON?",
    "OHIO STATE FANS: BEAT MICHIGAN OR WIN A TITLE, WHICH MATTERS MORE?"
  ];

  // ------------------------------
  // HELPERS
  // ------------------------------
  function add(text, label="NSN") {
    const span = document.createElement("span");
    span.className = "item";
    span.innerHTML = `<span class="label">${label}</span>${text}`;
    track.appendChild(span);
  }

  function shuffle(arr) {
    const a = arr.slice();
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      const tmp = a[i];
      a[i] = a[j];
      a[j] = tmp;
    }
    return a;
  }

  function addEngagement() {
    engagement.forEach(line => add(line, "NSN"));
  }

  function addTeamSections() {
    teamSections.forEach(text => add(text, "TEAM"));
  }

  function addFanQuestionsRotating() {
    const shuffled = shuffle(fanQuestions);
    const slice = shuffled.slice(0, 7); // show up to 7 per loop
    slice.forEach(q => add(q, "CHAT"));
  }

  // ------------------------------
  // LOAD NEWS + RUMORS
  // ------------------------------
  async function loadNewsAndRumors() {
    const rumorKeywords = ["rumor", "trade", "traded", "free agent", "free agency", "extension", "contract", "linked to", "talks", "interest in"];

    for (const feed of FEEDS) {
      try {
        const res = await fetch(feed);
        const xmlText = await res.text();
        const xml = new DOMParser().parseFromString(xmlText, "text/xml");
        const items = [...xml.querySelectorAll("item")].slice(0, 6);

        items.forEach(it => {
          const titleNode = it.querySelector("title");
          if (!titleNode) return;
          const title = titleNode.textContent ? titleNode.textContent.trim() : "";
          if (!title) return;

          const tLower = title.toLowerCase();
          let isRumor = false;
          for (const kw of rumorKeywords) {
            if (tLower.includes(kw)) {
              isRumor = true;
              break;
            }
          }

          if (isRumor) {
            add(title, "RUMOR");
          } else {
            add(title, "NEWS");
          }
        });

      } catch (err) {
        console.log("News fetch error:", err);
        add("LIVE SPORTS HEADLINES TEMPORARILY UNAVAILABLE", "NEWS");
      }
    }
  }

  // ------------------------------
  // BUILD TICKER
  // ------------------------------
  async function build() {
    track.innerHTML = "";

    // order: stream hooks → team sections → real news/rumors → fan questions
    addEngagement();
    addTeamSections();
    await loadNewsAndRumors();
    addFanQuestionsRotating();

    // duplicate for seamless loop
    const cloneHTML = track.innerHTML;
    track.innerHTML += cloneHTML;

    // constant-speed scroll
    setTimeout(() => {
      const width = track.scrollWidth;
      const duration = width / SPEED;
      track.style.animationDuration = duration + "s";
    }, 80);
  }

  build();
  setInterval(build, REFRESH_MS);
</script>

</body>
</html>