<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PRO SPORTS TICKER</title>
<style>
    /* --- CSS VARIABLES FOR EASY THEMIING --- */
    :root {
        --height: 70px;
        --bg-main: #0a0a0a;    /* Deep Black */
        --bg-card: #141414;    /* Slightly Lighter Card Background */
        --border-color: #2a2a2a;
        --accent-color: #00ff88; /* Neon Green Accent */
        --text-primary: #ffffff;
        --text-secondary: #a0a0a0;
        --font-stack: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    /* --- MAIN CONTAINER SETUP --- */
    body {
        margin: 0; padding: 0;
        height: var(--height);
        background: var(--bg-main);
        color: var(--text-primary);
        font-family: var(--font-stack);
        overflow: hidden; /* Hides anything outside the ticker area */
        display: flex;
        border-top: 2px solid var(--border-color);
        border-bottom: 2px solid var(--border-color);
    }

    /* --- FIXED LEFT LABEL ("SPORTS CENTER" STYLE) --- */
    .ticker-label {
        background: linear-gradient(135deg, #000 0%, #111 100%);
        color: var(--text-primary);
        padding: 0 30px;
        display: flex;
        align-items: center;
        gap: 12px;
        font-weight: 900;
        font-size: 24px;
        letter-spacing: -1px;
        z-index: 10; /* Keeps it on top of scrolling text */
        box-shadow: 5px 0 20px rgba(0,0,0,0.8); /* Depth shadow */
        border-right: 3px solid var(--accent-color);
    }
    
    /* Pulsing "LIVE" Dot */
    .live-indicator {
        width: 10px; height: 10px;
        background: var(--accent-color);
        border-radius: 50%;
        box-shadow: 0 0 10px var(--accent-color);
        animation: pulse 2s infinite ease-in-out;
    }

    /* --- SCROLLING ANIMATION CONTAINER --- */
    .ticker-wrap {
        flex: 1; /* Takes up remaining width */
        overflow: hidden;
        position: relative;
        display: flex;
        align-items: center;
    }

    /* Gradient Fade on the Far Right for Smooth Exit */
    .ticker-wrap::after {
        content: "";
        position: absolute; top: 0; bottom: 0; right: 0;
        width: 150px;
        background: linear-gradient(to right, transparent, var(--bg-main));
        z-index: 5;
        pointer-events: none;
    }

    /* The Moving Element */
    .ticker-move {
        display: flex;
        /* IMPORTANT: animation duration controls speed. */
        animation: ticker-scroll 45s linear infinite;
        will-change: transform; /* Performance optimization */
    }

    /* --- INDIVIDUAL GAME CARD DESIGN --- */
    .ticker-item {
        display: flex;
        align-items: center;
        background: var(--bg-card);
        border-right: 1px solid var(--border-color);
        padding: 0 25px;
        height: var(--height);
        white-space: nowrap; /* Keeps text on one line */
        gap: 25px; /* Spacing between game elements */
        flex-shrink: 0; /* Prevents squishing */
        position: relative;
    }

    /* League Badge (e.g., NFL, NBA) */
    .league-badge {
        font-size: 10px;
        font-weight: 800;
        color: var(--text-secondary);
        background: #222;
        padding: 4px 8px;
        border-radius: 4px;
        text-transform: uppercase;
        letter-spacing: 1px;
        position: absolute;
        top: 5px; left: 10px;
    }

    /* Score Block */
    .score-block {
        display: flex;
        flex-direction: column;
        justify-content: center;
        gap: 4px;
        min-width: 110px; /* Ensures enough width so no overlap */
        margin-top: 10px; /* Space for league badge */
    }

    .team-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 15px;
        font-weight: 700;
    }

    .score-val {
        font-variant-numeric: tabular-nums; /* Aligns numbers nicely */
        font-weight: 800;
        font-size: 16px;
    }
    /* Color styling for winning/losing scores */
    .score-val.winning { color: var(--accent-color); }
    .score-val.losing { color: var(--text-secondary); opacity: 0.8; }

    /* Game Status & Leader Info */
    .game-meta {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        justify-content: center;
        text-align: right;
        min-width: 160px; /* Prevents overlap with next card */
        gap: 4px;
    }
    
    .status-txt {
        font-size: 12px;
        font-weight: 700;
        color: var(--text-secondary);
        text-transform: uppercase;
    }
    .status-txt.live { color: #ff3333; } /* Red for live games */
    
    .leader-txt { 
        font-size: 12px; 
        color: var(--text-secondary); 
        max-width: 200px;
        overflow: hidden;
        text-overflow: ellipsis; /* Adds "..." if text is too long */
    }
    .leader-txt span { color: var(--text-primary); font-weight: 600; }

    /* --- ANIMATIONS --- */
    /* Infinite scroll animation */
    @keyframes ticker-scroll {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); } /* Moves half the total width */
    }
    
    /* Pulsing dot animation */
    @keyframes pulse {
        0% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.5; transform: scale(0.9); }
        100% { opacity: 1; transform: scale(1); }
    }
</style>
</head>
<body>

    <div class="ticker-label">
        <div class="live-indicator"></div>
        <span>NSN LIVE</span>
    </div>

    <div class="ticker-wrap">
        <div id="ticker-container" class="ticker-move">
            <div class="ticker-item" style="color:var(--text-secondary); font-style:italic;">
                INITIALIZING SPORTS FEED...
            </div>
        </div>
    </div>

<script>
    // --- CONFIGURATION ---
    const REFRESH_RATE_MS = 60000; // Fetch new data every 60 seconds
    const API_ENDPOINTS = [
        'https://site.api.espn.com/apis/site/v2/sports/football/nfl/scoreboard',
        'https://site.api.espn.com/apis/site/v2/sports/basketball/nba/scoreboard',
        'https://site.api.espn.com/apis/site/v2/sports/hockey/nhl/scoreboard'
    ];

    // --- MAIN FETCH FUNCTION ---
    async function fetchAndRenderTicker() {
        const container = document.getElementById('ticker-container');
        let gameCardsHTML = [];

        try {
            // Fetch all sports data in parallel for speed
            const responses = await Promise.all(
                API_ENDPOINTS.map(url => fetch(url).then(res => {
                    if (!res.ok) throw new Error(`Failed to fetch ${url}`);
                    return res.json();
                }))
            );
            
            // Process each sport's data
            responses.forEach(data => {
                const leagueAbbrev = data.leagues[0]?.abbreviation || 'GAME';
                if(data.events && data.events.length > 0) {
                    data.events.forEach(game => {
                        gameCardsHTML.push(createGameCard(game, leagueAbbrev));
                    });
                }
            });

        } catch(error) {
            console.error("Ticker Data Error:", error);
            // Optional: Render an error message in the ticker
            // gameCardsHTML.push('<div class="ticker-item" style="color:red;">DATA ERROR - RETRYING...</div>');
        }

        // RENDER TO DOM
        if(gameCardsHTML.length > 0) {
            const finalHTML = gameCardsHTML.join('');
            // **CRITICAL for seamless loop:** Duplicate the content.
            // The animation scrolls 50% of the width, showing the first set,
            // then instantly resets to 0% where the identical second set begins.
            container.innerHTML = finalHTML + finalHTML; 
        } else {
            container.innerHTML = '<div class="ticker-item">NO LIVE GAMES SCHEDULED RIGHT NOW</div><div class="ticker-item">NO LIVE GAMES SCHEDULED RIGHT NOW</div>';
        }
    }

    // --- HELPER: CREATE INDIVIDUAL GAME CARD HTML ---
    function createGameCard(game, league) {
        const competition = game.competitions[0];
        const homeTeam = competition.competitors.find(t => t.homeAway === 'home');
        const awayTeam = competition.competitors.find(t => t.homeAway === 'away');
        const statusText = game.status.type.shortDetail; // e.g., "Final", "10:45 1st"
        const isGameLive = game.status.type.state === 'in';
        
        // Parse scores, defaulting to 0 if game hasn't started
        const homeScore = parseInt(homeTeam.score) || 0;
        const awayScore = parseInt(awayTeam.score) || 0;

        // Logic to determine a "leader" or "MVP" to display
        let leaderDisplay = "";
        try {
            // Combine leaders from both teams if available
            let potentialLeaders = [];
            if (competition.leaders) {
                potentialLeaders = competition.leaders;
            } else if (homeTeam.leaders && awayTeam.leaders) {
                potentialLeaders = [...homeTeam.leaders, ...awayTeam.leaders];
            }
            
            // Find the first valid leader entry
            const topLeader = potentialLeaders.find(l => l.leaders && l.leaders.length > 0);
            if(topLeader) {
                const player = topLeader.leaders[0];
                // Shorten stat names for space
                const statName = topLeader.displayName
                    .replace('Passing Yards','Yds')
                    .replace('Rushing Yards','Rush Yds')
                    .replace('Receiving Yards','Rec Yds')
                    .replace('Points','Pts')
                    .replace('Assists','Ast')
                    .replace('Rebounds','Reb')
                    .replace('Saves','Sv');
                leaderDisplay = `<span>${player.athlete.shortName}</span>: ${player.displayValue} ${statName}`;
            }
        } catch(e) {
            // Fail silently if no leader data, just leave blank
        }

        // Build the HTML string
        return `
        <div class="ticker-item">
            <div class="league-badge">${league}</div>
            
            <div class="score-block">
                <div class="team-row">
                    <span>${awayTeam.team.abbreviation}</span>
                    <span class="score-val ${awayScore > homeScore ? 'winning' : 'losing'}">${awayTeam.score}</span>
                </div>
                <div class="team-row">
                    <span>${homeTeam.team.abbreviation}</span>
                    <span class="score-val ${homeScore > awayScore ? 'winning' : 'losing'}">${homeTeam.score}</span>
                </div>
            </div>

            <div class="game-meta">
                <div class="status-txt ${isGameLive ? 'live' : ''}">${statusText}</div>
                <div class="leader-txt">${leaderDisplay}</div>
            </div>
        </div>
        `;
    }

    // --- INITIALIZATION ---
    fetchAndRenderTicker(); // Run immediately on load
    setInterval(fetchAndRenderTicker, REFRESH_RATE_MS); // Schedule regular updates
</script>
</body>
</html>
